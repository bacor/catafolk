{
    "dataset_id": "densmore-teton-sioux",
    "sources": {
        "file": {
            "type": "file",
            "file_pattern": "data/kern/*.krn"
        }
    },
    "transformations": [
        ["rename", "file.cf_checksum", "checksum"],
        ["rename", "file.cf_path", "path"],
        ["rename", "file.cf_format", "format"],
        ["constant", "dataset_id", "densmore-teton-sioux"],
        ["constant", "source_key", "densmore1918teton"],
        ["constant", "has_music", true],
        ["constant", "has_lyrics", false],
        ["constant", "licence_abbrev", "CC BY-NC-SA 4.0"],

        ["rename", "file.OTL@ENG", "title"],
        ["rename", "file.MLC", "location"],
        ["rename", "file.URL", "url"],
        ["rename", "file.ENC", "encoder"],
        ["rename", "file.CNT", "culture"],
        ["rename", "file.MRD", "collection_date"],
        ["rename", "file.OCL", "collector"],
        ["rename", "file.MPN@@SIO", "performer"],
        ["rename", "file.AGN", "genre"],
        ["rename", "file.YEC", "copyright"],
        ["rename", "file.PPG", "source_page_num"],
        ["rename", "file.ONM", "source_song_num"],

        [
            "format", "path", "preview_url", 
            {"pattern": "http://verovio.humdrum.org/?file=folk/sioux/{}"}
        ],
        [
            "format", "source_page_num", "source_url", 
            {"pattern": "https://books.google.nl/books?id=Adw_AAAAYAAJ&pg=PA{}"}
        ],
        {
            "operation": "extract_groups",
            "inputs": ["file.ARL"],
            "outputs": ["latitude", "longitude"],
            "params": {
                "pattern": "([\\d\\.-]+)\/([\\d\\.-]+)\\#",
                "groups": [1, 2]
            }
        },
        {
            "operation": "extract_groups",
            "inputs": ["file.catalog"],
            "outputs": ["catalogue_number"],
            "params": {
                "pattern": "Catalogue No\\. (\\d+)",
                "groups": [1]
            }
        }
    ]
}