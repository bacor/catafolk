dataset_id: creighton-nova-scotia
analyzed: true
title: 
dataset_url: https://github.com/craigsapp/creighton-nova-scotia
urls:
  - http://kern.humdrum.org/browse?l=folk/novascotia
authors: 
  - name: Helen Creighton
    role: author
  - name: Craig Stuart Sapp
    url: https://github.com/craigsapp
    role: music and bibliographic data
  - name: Marcus Pearce
    role: phrase markings and key designations
  - name: Darell Conklin
    role: phrase markings and key designations
tags: [symbolic,phrases]
formats: [kern]
files: 152
notes: 
duration: 
copyright:
licence:
  unknown: true
  abbreviation: 
  text: 
  url: 
version: Unknown
description: >
  Digital edition of Songs and Ballads from Nova Scotia, collected by Helen Creighton (1932) in the Humdrum file format. 
issues:
  - title: Multiple encoders
    description: >
      The file lists multiple encoders in the `ENC1`, `ENC2` etc fields. These are currently not properly extracted
  - title: Ignoring number of verses
    description: >
      The meta field `verses` gives the number of verses. This is currently ignored.

#————————————————————————————————————————————————————————————————————

sources:
  - name: file
    type: file
    file_pattern: data/kern/*.krn

transformations:
  # Default Catafolk fields
  - rename: [file.cf_checksum, checksum]
  - rename: [file.cf_path, path]
  - rename: [file.cf_format, format]

  # Constants
  - constant: [dataset_id, creighton-nova-scotia]
  - constant: [has_music, true]
  - constant: [has_lyrics, false]

  - rename: [file.OTL, title]
  - rename: [file.ARE, location]
  - rename: [file.URL, url]
  - rename: [file.ENC1, encoder]
  - rename: [file.CNT, culture]
  - rename: [file.MRD, collection_date]
  - rename: [file.OCL, collector]
  - rename: [file.MPN, performer]
  - rename: [file.AGN, genre]
  - rename: [file.YEC, copyright]
  - rename: [file.PPG, source_page_num]

  - format:
    - id 
    - preview_url
    - pattern: https://verovio.humdrum.org/?file=users/craig/songs/creighton/nova/{}.krn

  - format:
    - id
    - url
    - pattern: https://github.com/craigsapp/creighton-nova-scotia/blob/master/kern/{}.krn
  
  - extract_groups:
      inputs: [file.ONM]
      outputs: [source_song_num]
      params:
        pattern: (\d+)\.
        groups: [1]
  