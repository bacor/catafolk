{
    "dataset_id": "sagrillo-scotland",
    "sources": {
        "file": {
            "type": "file",
            "file_pattern": "data/*.krn",
            "file_options": {
                "encoding": "ISO-8859-1"
            }
        }
    },
    "transformations": [
        ["rename", "file.cf_checksum", "checksum"],
        ["rename", "file.cf_path", "path"],
        ["rename", "file.cf_format", "format"],
        ["constant", "dataset_id", "sagrillo-scotland"],
        ["constant", "encoder", "Damien Sagrillo"],
        ["constant", "has_music", true],
        ["constant", "has_lyrics", false],
        ["constant", "location", "Schotland"],
        ["constant", "source_key", "haydnvolsliedbearbeitungen"],
        ["rename", "file.OTL", "title"],
        ["rename", "file.fkt", "genre"],
        ["join", ["file.meter", "file.meters"], "meter", {"sep": "; "}],
        [
            "format", "path", "preview_url", 
            {"pattern": "http://verovio.humdrum.org/?file=sagrillo/scotland/{}"}
        ],
        [
            "format", "path", "url", 
            {"pattern": "https://kern.humdrum.org/cgi-bin/ksdata?file={}&l=users/sagrillo/scotland&format=kern"}
        ],
        {
            "operation": "extract_groups",
            "inputs": ["file.key"],
            "outputs": ["key"],
            "params": {
                "pattern": "(\\w+) +(\\d+) +(\\w+) +([\\w\/]+)",
                "groups": [3]
            }
        }
    ]
}