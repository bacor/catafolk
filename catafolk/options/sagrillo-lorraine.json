{
    "dataset_id": "sagrillo-lorraine",
    "file_pattern": "*.krn",
    "file_encoding": "ISO-8859-1",
    "default_field_values": {
        "encoder": "Damien Sagrillo",
        "has_music": true,
        "has_lyrics": false
    },
    "override_field_values": {
        "preview_url": "http://verovio.humdrum.org/?file=sagrillo/lorraine/{path}",
        "url": "https://kern.humdrum.org/cgi-bin/ksdata?file={path}&l=users/sagrillo/lorraine&format=kern"
    },
    "meta_fields_conversion": {
        "reg": "location",
        "trd": "source_key",
        "fkt": "genre",
        "OTL": {
            "type": "regex",
            "pattern": "^([^\\(,]+(, (?!S.)(?!Nr)[^\\(,]+)*)((,? ?\\((.+)\\))|(, Nr\\. (\\d+)))?(,? S. ?(.+))?",
            "groups": ["title", null, null, null, "source_song_num", null, "source_song_num", null, "source_page_num"],
            "default": "title"
        },
        "cut2": {
            "type": "regex",
            "pattern": "^([^\\(,]+(, (?!S.)(?!Nr)[^\\(,]+)*)((,? ?\\((.+)\\))|(, Nr\\. (\\d+)))?(,? S. ?(.+))?",
            "groups": [null, null, null, null, "source_song_num", null, "source_song_num", null, "source_page_num"],
            "default": "title"
        },
        "mod": {
            "type": "regex",
            "pattern": "([^\\]\\?]+) ?\\??\\] +AMBITUS\\[(\\w+)",
            "groups": ["modality", "ambitus"],
            "default": "modality",
            "lowercase": true
        },
        "key": {
            "type": "regex",
            "pattern": "(\\w+) +(\\d+) +([\\w\\#]+) ([ \\w\/]+) ?\\] +ZZ\\[(\\d+)",
            "groups": [null, null, "key", "meter", null],
            "default": "key"
        }
    },
    "meta_values_conversion": {
        "source_key": {
            "type": "regex",
            "map": {
                "PINCK, Louis: Verklingende Weisen, Bd 1, Metz 1928": "pinck1926verklingende1",
                "PINCK, Louis: Verklingende Weisen, Bd 2, Metz 1928": "pinck1928verklingende2",
                "PINCK, Louis: Verklingende Weisen, Bd3, Metz 1933": "pinck1933verklingende3",
                "PINCK, Louis: Verklingende Weisen Bd 4, Kassel 1939": "pinck1939verklingende4"
            },
            "default_null": true
        },
        "source_song_num": {
            "type": "regex",
            "map": {
                "Band [1-5]": null
            }
        },
        "modality": {
            "type": "regex",
            "map": {
                "dreitonskala ?": "tritonic",
                "viertonskala": "tetratonic",
                
                "pentatonik ?$": "pentatonic",
                "pentatonik dur": "pentatonic major",
                "pentatonik moll ": "pentatonic minor",
                "pentatonik halbtonl. gong": "pentatonic (halftone)",
                
                "sechstonskala ?$": "hexatonic",
                "sechstonskala dur ": "hexatonic minor",
                "sechstonskala moll": "hexatonic minor",

                "heptatonik $" : "heptatonic",
                "heptatonik moll": "heptatonic minor",
                "heptatonik harmonisch moll": "heptatonic melodic minor",
                "heptatonic major": "heptatonic major",
                "heptatonik dur": "heptatonic major",
                "heptatonic minor": "heptatonic minor",
                "heptatonik +ionisch": "heptatonic ionian",
                "heptatonik dorisch": "heptatonic dorian",
                "heptatonik phrygisch": "heptatonic phrygian",
                "heptatonik lydisch": "heptatonic lydian",
                "heptatonik mixolydisch": "heptatonic mixolydian",
                "heptatonik aeolisch": "heptatonic aeolean",
                
                "achttonskala $": "octatonic",
                "achttonskala dur": "octatonic major",
                "achttonskala moll ?": "octatonic minor",
                "achttonskala melodisch moll ohne 7": "octatonic minor w/o 7",
                "achttonskala melodisch moll ohne 6": "octatonic minor w/o 6",
                "achttonskala melodisch moll ohne 6b": "octatonic minor w/o 6b",

                "neuntonskala ?$": "enneatonic",
                "neuntonskala moll ?": "enneatonic minor",
                "neuntonskala dur ?": "enneatonic major",
                
                "zehntonskala ?": "decatonic"
            }
        },
        "meter": {
            "type": "regex",
            "map": {
                "FREI": "free"
            }
        }
    },
    "corrections": {
        "p0566": {
            "title": "Der Fisch(?) Concelebrant",
            "source_song_num": "4-5",
            "source_page_num": "7"
        },
        "p1032": {
            "title": "Ach, Schatz, jetzt mu&szlig; ich wandern",
            "source_song_num": "3-59",
            "source_page_num": "170"
        },
        "p0573": {
            "source_song_num": "4-12"
        },
        "p0574": {
            "title": "Ich wine wei&szlig;e Spinnerin"
        },
        "p0575": {
            "source_song_num": "4-14",
            "source_page_num": "19"
        },
        "p0580|p0577":{
            "source_key": "pinck1939verklingende4"
        },
        "p0588": {
            "title": "Runckelstube",
            "source_song_num": "4-27",
            "source_page_num": "39"
        },
        "p0810": {
            "title": "Ich ging einmal spazieren",
            "source_page_num": "113"
        },
        "p0965": {
            "title": "Spinn, Spinn",
            "source_song_num": "2-94",
            "source_page_num": "275"
        }
    }
}